description = "Featured Properties"
==
{% put styles %}
<link rel="stylesheet" href="{{ 'assets/css/partials/property.css'|theme }}" async>
{% endput %}
<!-- Search Home -->
<section id="search-home" class="section">
  <div class="container">
    <form data-request="propertyObject::onSearch" data-request-success="onSearch(data.result)" id="form-seach">
      <div class="title-container">
        <h2 class="title" {% if only_order %} style="margin-bottom: -60px"{% endif %}>
          {% if title %}
          <span>{{ title }}</span>
          {% else %}
          START THE SEARCH FOR<br>
          <span>YOUR PERFECT IBIZA HOME</span>
          {% endif %}
        </h2>
      </div>
      
      <div class="items-container" {% if only_order %}style="display: none" {% endif %}>
        <div class="items-search-home flex t-col-3">
          {% if not only_order %}
          <div class="item">
            <div class="filter-search flex">
              <select name="location" id="location" class="location" multiple>
                <option value="ibiza">ibiza</option>
                <option value="san antonio">san antonio</option>
                <option value="san jose">san jose</option>
                <option value="san juan">san juan</option>
                <option value="santa eulalia">santa eulalia</option>
              </select>
              <select name="property_type" id="property_type" class="property_type" multiple>
                <option value="apartment">apartment</option>
                <option value="finca">finca</option>
                <option value="land">land</option>
                <option value="townhouse">townhouse</option>
                <option value="villa">villa</option>
              </select>
            </div>
          </div>
          <div class="item">
            <div class="flex">
              <select name="min_price" id="min_price">
                <option selected value="">MIN PRICE</option>
                <option value="250000">€250,000</option>
                <option value="500000">€500,000</option>
                <option value="1000000">€1,000,000</option>
                <option value="3000000">€3,000,000</option>
                <option value="5000000">€5,000,000</option>
                <option value="7000000">€7,000,000</option>
                <option value="10000000">€10,000,000</option>
                <option value="10000001">€10,000,000</option>
              </select>
              <select name="max_price" id="max_price">
                <option selected value="">MAX PRICE</option>
                <option value="250000">€250,000</option>
                <option value="500000">€500,000</option>
                <option value="1000000">€1,000,000</option>
                <option value="3000000">€3,000,000</option>
                <option value="5000000">€5,000,000</option>
                <option value="7000000">€7,000,000</option>
                <option value="10000000">€10,000,000</option>
                <option value="99999999999999999">€15,000,000</option>
              </select>
            </div>
          </div>
          {% endif %}
          <div class="item button hide-mobile"{% if only_order %} style="display: none"{% endif %}>
            <div class="bg">
              <button class="btn btn-primary" type="submit" id="formSubmit">
                SEARCH
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <div class="advanced-serch" {% if only_order %} style="border-top: 0"{% endif %}>
        {% if not open %}
        <div class="flex">
          <div class="text">
            <p>ADVANCED SEARCH</p>
          </div>
          <div class="icon-closed">
            <img src="{{ 'assets/img/svg-loaders/desplegable.svg'|theme }}" alt="">
          </div>
        </div>
        {% endif %}
        <div class="advanced_search_bar__Container-sc-18jm8s2-0 gTThrg" {% if only_order %} style="padding-top: 0"{% endif %}>
          <div class="advanced_search_bar__Inner-sc-18jm8s2-1 kCRVk"></div>
          <div class="advanced_search_bar__Advanced-sc-18jm8s2-2 eqpZXI open">
            {% if not only_order %}
            <div class="advanced_search_bar__AdvancedSearchGrid-sc-18jm8s2-3 gizNfl">
              <div class="advanced_search_bar__Left-sc-18jm8s2-4 dIpNvQ">
                <div width="100%" class="select__Container-sc-fszh90-0 eJMRGV select-container">
                  <h3>BEDROOMS</h3>
                  <select name="bedrooms" id="bedrooms" class="select__S-sc-fszh90-1 bBNRQt">
                    <option value="">MIN — MAX</option>
                    <option value="0">Studio</option>
                    <option value="1-3">1-3</option>
                    <option value="4-6">4-6</option>
                    <option value="6-1000">6+</option>
                  </select>
                </div>
                <div width="100%" class="select__Container-sc-fszh90-0 eJMRGV select-container">
                  <h3>BATHROOMS</h3>
                  <select name="bathrooms" id="bathrooms" class="select__S-sc-fszh90-1 bBNRQt">
                    <option value="">MIN — MAX</option>
                    <option value="1-3">1-3</option>
                    <option value="4-6">4-6</option>
                    <option value="6-1000">6+</option>
                  </select>
                </div>
              </div>
              <div class="advanced_search_bar__Center-sc-18jm8s2-5 lgQLYy">
                <div width="100%" class="select__Container-sc-fszh90-0 eJMRGV select-container">
                  <h3>LIVING AREA</h3>
                  <select name="living_area" id="living_area" class="select__S-sc-fszh90-1 bBNRQt">
                    <option value="">MIN — MAX M²</option>
                    <option value="50-100">50-100 m²</option>
                    <option value="101-200">100-200 m²</option>
                    <option value="201-300">200-300 m²</option>
                    <option value="301-400">300-400 m²</option>
                    <option value="401-500">400-500 m²</option>
                    <option value="501-600">500-600 m²</option>
                    <option value="601-800">600-800 m²</option>
                    <option value="801-100000">800+ m²</option>
                  </select>
                </div>
                <div width="100%" class="select__Container-sc-fszh90-0 eJMRGV select-container">
                  <h3>PLOT SIZE</h3>
                  <select name="plot_size" id="plot_size" class="select__S-sc-fszh90-1 bBNRQt">
                    <option value="">MIN — MAX M²</option>
                    <option value="1000-5000">1,000 - 5,000 m²</option>
                    <option value="5001-10000">5,000 - 10,000 m²</option>
                    <option value="10001-20000">10,000 - 20,000 m²</option>
                    <option value="20001-30000">20,000 - 30,000 m²</option>
                    <option value="30001-50000">30,000 - 50,000 m²</option>
                    <option value="50001-100000">50,000 - 100,000 m²</option>
                    <option value="100001-99999999">100,000+ m²</option>
                  </select>
                </div>
              </div>
              <div class="advanced_search_bar__Right-sc-18jm8s2-6 boDUXw">
                <label class="advanced_search_bar__Options-sc-18jm8s2-7 hIYUQb">
                  <label class="advanced_search_bar__Option-sc-18jm8s2-8 ZwXPv">
                    <input id="sea_view" name="sea_view" type="checkbox">
                    <span>Sea View</span>
                  </label>
                  <label class="advanced_search_bar__Option-sc-18jm8s2-8 ZwXPv">
                    <input id="garden" name="garden" type="checkbox">
                    <span>Garden</span>
                  </label>
                  <label class="advanced_search_bar__Option-sc-18jm8s2-8 ZwXPv">
                    <input id="swimmingpool" name="swimmingpool" type="checkbox">
                    <span>Swimming Pool</span>
                  </label>
                  <label class="advanced_search_bar__Option-sc-18jm8s2-8 ZwXPv">
                    <input id="sea_access" name="sea_access" type="checkbox">
                    <span>Sea Access</span>
                  </label>
                  <label class="advanced_search_bar__Option-sc-18jm8s2-8 ZwXPv">
                    <input id="terrace" name="terrace" type="checkbox">
                    <span>Terrace</span>
                  </label>
                  <label class="advanced_search_bar__Option-sc-18jm8s2-8 ZwXPv">
                    <input id="balcony" name="balcony" type="checkbox">
                    <span>Balcony</span>
                  </label>
                </label>
              </div>
            </div>
            {% endif %}
            <div class="advanced_search_bar__FilterDiv-sc-18jm8s2-9 jtVACV">
              <div class="filter_bar__Container-sc-19ouwvv-0 cfDa-dI">
                <div class="filter_bar__FilterDiv-sc-19ouwvv-8 jIWIig">
                  <div width="200px" class="select__Container-sc-fszh90-0 icnSJv select-container">
                    <h3>SORT BY</h3>
                    <select name="sort" class="select__S-sc-fszh90-1 bBNRQt"{% if only_order %} onchange="$('#formSubmit').trigger('click');"{% endif %}>
                      <option value="">- Default -</option>
                      <option value="ascending">Price: Ascending</option>
                      <option value="descending">Price: Descending</option>
                      <option value="date">Most Recent Listing</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="item button show-mobile">
          <div class="bg">
            <button class="btn btn-primary" type="submit">
              SEARCH
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</section>

<!-- Results -->
{% put scripts %}
<script type="text/javascript"
  src="{{ 'assets/library/jquery.multi-select/src/jquery.multi-select.min.js'|theme }}"></script>
<link rel="stylesheet" type="text/css" href="{{ 'assets/library/jquery.multi-select/src/example-styles.css'|theme }}">
<script>
  $(function () {
    $("#formSubmit").trigger('click');
    $('.location').multiSelect({
      noneText: 'search by area',
      buttonHTML: '<textarea class="multi-select-button" name="location_all" id="location_all">',
      presets: [
        {
          name: 'Select All',
          //options: []
          all: true
        }
      ]
    });
    $('.property_type').multiSelect({
      noneText: 'property type',
      buttonHTML: '<textarea class="multi-select-button" name="property_type_all" id="property_type_all">',
      presets: [
        {
          name: 'Select All',
          //options: []
          all: true
        }
      ]
    });
  });
  function productSlider() {
    $('#search-results .product-slider').owlCarousel({
      loop: true,
      margin: 0,
      nav: true,
      pagination: false,
      dots: false,
      responsive: {
        0: {
          items: 1
        },
        600: {
          items: 1
        },
        1000: {
          items: 1
        }
      }
    });
  }
  function onSearch(result) {
    //alert(result);
    if (result != '[]') {
      var json = JSON.parse(result);
      $("#search-results").html('');

      json.forEach(function (valor, indice) {
        //alert(valor.property_id);
        $('#initial-results .property[data-property-id="' + valor.property_id + '"]').clone().appendTo("#search-results");
      });
      productSlider();
    } else {
      $('#search-results').html('<div style="text-align: left; width: 100%;">No properties match search criteria.</div>')
    }
  }
</script>
{% endput %}
<section id="results" class="section">
  <div class="container">
    <div class="items-results flex t-col-3  wow fadeIn" id="search-results"></div>
    <div class="items-results flex t-col-3" id="initial-results" style="display:none;">
    {% if related_list %}
      {% for property in propertyObject.related %}
        {% partial 'static/property' property=property show_gallery=true %}
      {% endfor %}
    {% else %}
      {% for property in propertyObject.list %}
        {% partial 'static/property' property=property show_gallery=true %}
      {% endfor %}
    {% endif %}
    </div>
  </div>
</section>